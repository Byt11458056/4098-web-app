<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Recycle Game Mode</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2196F3">
</head>
<body>
    <div class="app-container">
        <!-- Object Selection Screen -->
        <div class="game-screen" id="objectSelectionScreen">
            <div class="game-content">
                <h1 class="game-title">üéÆ Recycle Game</h1>
                <p class="game-description">Select the object type to detect:</p>
                <div class="selection-buttons">
                    <button class="selection-btn" data-object="can">
                        <span class="selection-emoji">ü•´</span>
                        <span class="selection-label">Can</span>
                    </button>
                    <button class="selection-btn" data-object="paper">
                        <span class="selection-emoji">üìÑ</span>
                        <span class="selection-label">Paper</span>
                    </button>
                    <button class="selection-btn" data-object="plastic-bottle">
                        <span class="selection-emoji">üçæ</span>
                        <span class="selection-label">Plastic Bottle</span>
                    </button>
                </div>
                <button class="game-back-btn" id="backToMainBtn">üè† Back to Main</button>
            </div>
        </div>

        <!-- Difficulty Selection Screen -->
        <div class="game-screen hidden" id="difficultyScreen">
            <div class="game-content">
                <h1 class="game-title">‚öôÔ∏è Select Difficulty</h1>
                <p class="game-description">Choose your challenge level:</p>
                <div class="selection-buttons">
                    <button class="selection-btn difficulty-btn" data-difficulty="easy">
                        <span class="selection-emoji">üòä</span>
                        <span class="selection-label">Easy</span>
                        <span class="selection-time">120 seconds</span>
                    </button>
                    <button class="selection-btn difficulty-btn" data-difficulty="normal">
                        <span class="selection-emoji">üòé</span>
                        <span class="selection-label">Normal</span>
                        <span class="selection-time">90 seconds</span>
                    </button>
                    <button class="selection-btn difficulty-btn" data-difficulty="hard">
                        <span class="selection-emoji">üî•</span>
                        <span class="selection-label">Hard</span>
                        <span class="selection-time">60 seconds</span>
                    </button>
                </div>
                
                <!-- Selected Mode Header -->
                <div class="mode-info-section hidden" id="modeInfoSection">
                    <div class="mode-header">
                        <div class="mode-label">Selected Mode</div>
                        <div class="mode-value" id="selectedMode">Easy</div>
                    </div>
                    
                    <!-- Target Score and Start Button -->
                    <div class="target-info-header">
                        <div class="target-label">Target Time</div>
                        <div class="target-value" id="targetTime">120s</div>
                        <button class="game-start-btn" id="startGameBtn">üéÆ Start Game</button>
                    </div>
                </div>
                
                <button class="game-back-btn" id="backToObjectBtn">‚Üê Back</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen hidden" id="gameScreen">
            <div class="camera-container">
                <video id="videoElement" autoplay playsinline></video>
                <canvas id="canvas"></canvas>
                <div class="loading-overlay" id="loadingOverlay">
                    <div class="spinner"></div>
                    <p>Loading model...</p>
                </div>
                
                <!-- Game Info Headers -->
                <div class="game-info-overlay">
                    <div class="game-header" role="banner">
                        <div class="game-header-section">
                            <span class="game-header-label">Mode</span>
                            <span class="game-mode-value" id="gameModeDisplay">Easy</span>
                        </div>
                        <div class="game-header-section object-filter-section" id="objectFilterSection">
                            <span class="game-header-label">Object Type</span>
                            <button class="object-filter-btn" id="objectFilterToggle" type="button" aria-haspopup="listbox" aria-expanded="false">
                                <span class="object-filter-emoji" id="objectFilterEmoji">ü•´</span>
                                <span class="object-filter-text" id="objectFilterLabel">Can</span>
                                <span class="object-filter-chevron" aria-hidden="true">‚ñæ</span>
                            </button>
                            <div class="object-filter-dropdown hidden" id="objectFilterDropdown" role="listbox">
                                <button class="object-filter-option active" data-object="can" role="option" aria-selected="true">
                                    <span class="object-filter-option-emoji">ü•´</span>
                                    <span>Can</span>
                                </button>
                                <button class="object-filter-option" data-object="paper" role="option" aria-selected="false">
                                    <span class="object-filter-option-emoji">üìÑ</span>
                                    <span>Paper</span>
                                </button>
                                <button class="object-filter-option" data-object="plastic-bottle" role="option" aria-selected="false">
                                    <span class="object-filter-option-emoji">üçæ</span>
                                    <span>Bottle</span>
                                </button>
                            </div>
                        </div>
                        <div class="game-header-section timer">
                            <span class="game-header-label">Time Left</span>
                            <span class="game-timer-value" id="gameTimerDisplay">120s</span>
                        </div>
                    </div>
                    <div class="game-status-row">
                        <span class="game-status-label">Detecting</span>
                        <div class="game-detecting-info">
                            <span class="detecting-emoji" id="detectingEmoji">ü•´</span>
                            <span class="detecting-text" id="detectingText">Detecting Can</span>
                        </div>
                    </div>
                </div>

                <!-- Finish Button -->
                <div class="finish-button-container">
                    <button class="finish-btn" id="finishBtn">
                        ‚úì Declare Finish
                    </button>
                </div>

                <!-- Exit Button -->
                <button class="game-exit-btn" id="exitGameBtn">‚úï</button>

                <!-- Info Card (Floating Bottom Center) -->
                <div class="info-overlay">
                    <div class="info-card" id="infoCard">
                        <p>Point camera at recyclables</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- End Screen -->
        <div class="game-screen hidden" id="endScreen">
            <div class="game-content">
                <h1 class="game-title">üéâ Game Complete!</h1>
                <div class="game-results">
                    <div class="result-item">
                        <div class="result-label">Object Type</div>
                        <div class="result-value-text" id="finalObjectType">Can</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Difficulty</div>
                        <div class="result-value-text" id="finalDifficulty">Easy</div>
                    </div>
                    <div class="result-item highlight">
                        <div class="result-label">Time Used</div>
                        <div class="result-value" id="finalTime">0s</div>
                    </div>
                    <div class="result-message" id="resultMessage">Great job!</div>
                </div>
                <div class="game-buttons">
                    <button class="game-start-btn" id="replayBtn">üîÑ Play Again</button>
                    <button class="game-back-btn" id="exitToMainBtn">üè† Exit to Main</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="game.js"></script>
</body>
</html>
